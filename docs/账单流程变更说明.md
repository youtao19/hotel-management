# 账单流程变更说明

## 变更概述
根据业务需求，账单创建流程已从原来的"退房时创建"改为"入住时创建"。

## 主要变更

### 1. Bill.vue 组件变更
- **移除功能**：
  - 取消了"是否退押金"选项
  - 取消了支付方式选择功能
  
- **新增功能**：
  - 自动使用创建订单时选择的支付方式
  - 显示完整的订单信息（订单号、客人姓名、房间号）
  - 总金额计算方式改为：房费 + 押金

### 2. ViewOrders.vue 页面变更
- **办理入住流程**：
  1. 点击"办理入住"按钮
  2. 更新订单状态为"已入住"
  3. 自动弹出账单创建对话框
  4. 完成账单创建后，入住手续完成

- **办理退房流程**：
  1. 点击"办理退房"按钮
  2. 确认退房操作
  3. 直接更新订单状态为"已退房"
  4. 更新房间状态为"清洁中"
  5. 不再需要创建账单

### 3. 业务流程变更
- **原流程**：创建订单 → 办理入住 → 办理退房（创建账单）
- **新流程**：创建订单 → 办理入住（创建账单） → 办理退房

## 优势
1. **简化退房流程**：退房时不再需要选择支付方式或确认押金退还
2. **提前确认费用**：在入住时就明确所有费用
3. **减少操作步骤**：退房时直接完成，无需额外的账单操作
4. **数据一致性**：支付方式与创建订单时保持一致

## 影响的文件
- `src/components/Bill.vue` - 账单组件
- `src/pages/ViewOrders.vue` - 订单查看页面
- `src/components/OrderDetailsDialog.vue` - 订单详情对话框（无需修改）

## 注意事项
- 确保在入住时账单创建成功后才算入住完成
- 退房操作简化，但仍需确认房间状态正确更新
- 账单中的支付方式信息来源于订单创建时的选择
