# é…’åº—ç®¡ç†ç³»ç»Ÿé¡¹ç›®ç»“æ„åˆ†æ

## é¡¹ç›®æ¦‚è§ˆ
- **é¡¹ç›®åç§°**: hotel-management-system
- **ç‰ˆæœ¬**: 0.0.1
- **æè¿°**: åŸºäºQuasaræ¡†æ¶çš„é…’åº—ç®¡ç†ç³»ç»Ÿ
- **ä½œè€…**: youtao19

## æŠ€æœ¯æ ˆæ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ
- **ä¸»æ¡†æ¶**: Vue.js 3.4.18
- **UIæ¡†æ¶**: Quasar 2.16.0 (åŸºäºMaterial Designçš„Vue.jsç»„ä»¶åº“)
- **è·¯ç”±**: Vue Router 4.0.0
- **çŠ¶æ€ç®¡ç†**: Pinia 3.0.1
- **HTTPå®¢æˆ·ç«¯**: Axios 1.2.1
- **æ„å»ºå·¥å…·**: Quasar CLI + Vite

### åç«¯æŠ€æœ¯æ ˆ
- **è¿è¡Œç¯å¢ƒ**: Node.js
- **Webæ¡†æ¶**: Express 5.1.0
- **æ•°æ®åº“**: PostgreSQL (ä½¿ç”¨pg 8.16.0é©±åŠ¨)
- **ç¼“å­˜**: Redis (ä½¿ç”¨ioredis 5.6.1)
- **èº«ä»½éªŒè¯**: åŸºäºsessionçš„è®¤è¯æœºåˆ¶
- **å¯†ç åŠ å¯†**: bcrypt 5.1.1
- **é‚®ä»¶æœåŠ¡**: nodemailer 7.0.3
- **æ•°æ®éªŒè¯**: express-validator 7.2.1
- **é™æµ**: rate-limiter-flexible 7.1.0

### å¼€å‘ä¸æµ‹è¯•å·¥å…·
- **æµ‹è¯•æ¡†æ¶**: Jest 29.7.0
- **APIæµ‹è¯•**: Supertest 7.1.1
- **å¼€å‘ç›‘å¬**: nodemon 3.1.10
- **å¹¶å‘æ‰§è¡Œ**: concurrently 9.1.2
- **ç¯å¢ƒå˜é‡**: cross-env 7.0.3

## é¡¹ç›®ç›®å½•ç»“æ„ï¼ˆå·²é‡‡ç”¨ npm workspaces åˆ†åŒ…ï¼‰

```
hotel-management-system/
â”œâ”€â”€ ğŸ“ frontend/                # å‰ç«¯åŒ…ï¼ˆQuasar + Vueï¼‰
â”‚   â”œâ”€â”€ ğŸ“ src/                 # å‰ç«¯æºç 
â”‚   â”œâ”€â”€ quasar.config.js        # ä»£ç† /api -> http://localhost:3000
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ ğŸ“ backend/                 # åç«¯åŒ…ï¼ˆExpressï¼‰
â”‚   â”œâ”€â”€ ğŸ“ appSettings/         # åº”ç”¨è®¾ç½®ä¸ç¯å¢ƒåŠ è½½
â”‚   â”œâ”€â”€ ğŸ“ database/            # æ•°æ®åº“
â”‚   â”‚   â”œâ”€â”€ ğŸ“ postgreDB/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ tables/      # è¡¨ç»“æ„å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ pg.js           # è¿æ¥æ± ä¸åˆå§‹åŒ–
â”‚   â”‚   â””â”€â”€ ğŸ“ redis/
â”‚   â”œâ”€â”€ ğŸ“ modules/             # ä¸šåŠ¡æ¨¡å—
â”‚   â”œâ”€â”€ ğŸ“ routes/              # è·¯ç”±
â”‚   â”œâ”€â”€ ğŸ“ scripts/             # å¯¼å‡º/åˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ ğŸ“ tests/               # æµ‹è¯•
â”‚   â”œâ”€â”€ server.js
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ compose.yaml                # Docker Composeï¼ˆå¼€å‘ç¤ºä¾‹ï¼‰
â”œâ”€â”€ dev.env                     # ç¯å¢ƒå˜é‡ï¼ˆæ ¹çº§ï¼›è¢« backend/appSettings/setup.js è¯»å–ï¼‰
â””â”€â”€ package.json                # æ ¹ workspaces é…ç½®
```

## æ ¸å¿ƒä¸šåŠ¡æ¨¡å—

### æ•°æ®åº“è®¾è®¡
é¡¹ç›®é‡‡ç”¨PostgreSQLä½œä¸ºä¸»æ•°æ®åº“ï¼Œè®¾è®¡äº†ä»¥ä¸‹æ ¸å¿ƒè¡¨ç»“æ„ï¼š

#### æ ¸å¿ƒæ•°æ®è¡¨
1. **account** - ç”¨æˆ·è´¦æˆ·è¡¨
   - ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€é‚®ç®±éªŒè¯ã€å¯†ç åŠ å¯†å­˜å‚¨

2. **room_types** - æˆ¿å‹è¡¨
   - æˆ¿å‹ä»£ç ã€åç§°ã€åŸºç¡€ä»·æ ¼ã€æè¿°ã€çŠ¶æ€

3. **rooms** - æˆ¿é—´è¡¨
   - æˆ¿é—´å·ã€æˆ¿å‹å…³è”ã€çŠ¶æ€ã€ä»·æ ¼ã€æ˜¯å¦å…³é—­

4. **orders** - è®¢å•è¡¨
   - è®¢å•ç¼–å·ã€æ¥æºå¹³å°ã€å®¢äººä¿¡æ¯ã€å…¥ä½é€€æˆ¿æ—¥æœŸã€æ”¯ä»˜æ–¹å¼

5. **bills** - è´¦å•è¡¨
   - è®¢å•å…³è”ã€æˆ¿è´¹ã€æŠ¼é‡‘ã€é€€æ¬¾çŠ¶æ€ã€æ”¯ä»˜æ–¹å¼

6. **shift_handover** - äº¤æ¥ç­è¡¨
   - äº¤æ¥ç­è®°å½•ã€ç»Ÿè®¡æ•°æ®ã€å¤‡æ³¨ä¿¡æ¯

#### æ•°æ®åº“ç‰¹æ€§
- æ”¯æŒltreeå’Œpg_trgmæ‰©å±•
- å®Œæ•´çš„å¤–é”®çº¦æŸå’Œç´¢å¼•ä¼˜åŒ–
- äº‹åŠ¡å¤„ç†ç¡®ä¿æ•°æ®ä¸€è‡´æ€§

### å‰ç«¯é¡µé¢ç»“æ„

#### ä¸»è¦é¡µé¢ç»„ä»¶
1. **Login.vue** - ç™»å½•é¡µé¢
2. **Register.vue** - æ³¨å†Œé¡µé¢
3. **Dash-board.vue** - ä»ªè¡¨æ¿
4. **RoomStatus.vue** - æˆ¿é—´çŠ¶æ€ç®¡ç†
5. **CreateOrder.vue** - åˆ›å»ºè®¢å•
6. **ViewOrders.vue** - è®¢å•æŸ¥çœ‹
7. **ShiftHandover.vue** - äº¤æ¥ç­ç®¡ç†

#### ä¸šåŠ¡ç»„ä»¶
1. **Bill.vue** - è´¦å•ç»„ä»¶
2. **ChangeRoomDialog.vue** - æ¢æˆ¿å¯¹è¯æ¡†
3. **OrderDetailsDialog.vue** - è®¢å•è¯¦æƒ…å¯¹è¯æ¡†

### åç«¯æ¨¡å—æ¶æ„

#### ä¸šåŠ¡æ¨¡å— (modules/)
1. **authentication.js** - èº«ä»½è®¤è¯
2. **orderModule.js** - è®¢å•ç®¡ç†
3. **roomModule.js** - æˆ¿é—´ç®¡ç†
4. **billModule.js** - è´¦å•ç®¡ç†
5. **shiftHandoverModule.js** - äº¤æ¥ç­ç®¡ç†
6. **rateLimiter.js** - è®¿é—®é™æµ
7. **emailSetup.js** - é‚®ä»¶é…ç½®

#### è·¯ç”±æ¨¡å— (routes/)
1. **authRoute.js** - è®¤è¯è·¯ç”±
2. **roomRoute.js** - æˆ¿é—´è·¯ç”±
3. **roomTypeRoute.js** - æˆ¿å‹è·¯ç”±
4. **orderRoute.js** - è®¢å•è·¯ç”±
5. **billRoute.js** - è´¦å•è·¯ç”±
6. **shiftHandoverRoute.js** - äº¤æ¥ç­è·¯ç”±
7. **userRoute.js** - ç”¨æˆ·è·¯ç”±

## æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

### æˆ¿é—´ç®¡ç†
- æˆ¿é—´çŠ¶æ€å®æ—¶è·Ÿè¸ªï¼ˆç©ºé—²/å·²é¢„è®¢/å·²å…¥ä½/æ¸…æ´ä¸­/ç»´ä¿®ä¸­ï¼‰
- æˆ¿å‹ç®¡ç†å’Œä»·æ ¼è®¾ç½®
- æˆ¿é—´å¯ç”¨æ€§æ£€æŸ¥ç®—æ³•
- æ”¯æŒæˆ¿é—´å…³é—­å’Œé‡æ–°å¼€æ”¾

### è®¢å•ç®¡ç†
- å¤šå¹³å°è®¢å•æ¥æºæ”¯æŒï¼ˆç¾å›¢ã€æºç¨‹ã€é£çŒªã€åŒç¨‹æ—…è¡Œï¼‰
- è®¢å•çŠ¶æ€æµè½¬ç®¡ç†
- æˆ¿é—´åˆ†é…å’Œå†²çªæ£€æµ‹
- è®¢å•ä¿®æ”¹å’Œå–æ¶ˆåŠŸèƒ½

### äº¤æ¥ç­ç³»ç»Ÿ
- æ”¶æ¬¾æ˜ç»†ç»Ÿè®¡ï¼ˆå®¢æˆ¿/ä¼‘æ¯æˆ¿åˆ†ç±»ï¼‰
- æ”¯ä»˜æ–¹å¼åˆ†ç±»ç»Ÿè®¡
- æŠ¼é‡‘ç®¡ç†å’Œé€€æ¬¾å¤„ç†
- äº¤æ¥ç­æ•°æ®å¯¼å‡ºå’Œæ‰“å°

### è´¢åŠ¡ç®¡ç†
- æ”¶å…¥ç»Ÿè®¡å’Œåˆ†æ
- æ”¯ä»˜æ–¹å¼å¤šæ ·åŒ–æ”¯æŒ
- æŠ¼é‡‘å’Œé€€æ¬¾ç®¡ç†
- è´¦å•ç”Ÿæˆå’Œè®°å½•

## å¼€å‘ä¸éƒ¨ç½²é…ç½®

### ç¯å¢ƒé…ç½®
é¡¹ç›®ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†é…ç½®ï¼Œæ”¯æŒå¼€å‘å’Œç”Ÿäº§ç¯å¢ƒï¼š
- æ•°æ®åº“è¿æ¥é…ç½®
- Redisç¼“å­˜é…ç½®
- é‚®ä»¶æœåŠ¡é…ç½®
- APIå¯†é’¥ç®¡ç†

### æ„å»ºå’Œå¯åŠ¨è„šæœ¬ï¼ˆworkspacesï¼‰
æ ¹ package.jsonï¼ˆèŠ‚é€‰ï¼‰ï¼š
```
{
  "workspaces": ["frontend", "backend"],
  "scripts": {
    "dev": "concurrently \"npm --workspace backend run dev\" \"npm --workspace frontend run dev\"",
    "start": "npm --workspace backend run start",
    "db:init": "npm --workspace backend run db:init",
    "export-structure": "npm --workspace backend run export-structure",
    "export-all": "npm --workspace backend run export-all"
  }
}
```

å‰ç«¯ `frontend/package.json`ï¼š
```
{
  "scripts": {
    "dev": "cross-env NODE_ENV=dev quasar dev",
    "build": "quasar build",
    "postinstall": "quasar prepare"
  }
}
```

åç«¯ `backend/package.json`ï¼š
```
{
  "scripts": {
    "dev": "cross-env NODE_ENV=dev nodemon server.js",
    "start": "node server.js",
    "test": "cross-env NODE_ENV=test jest",
    "db:init": "node -e \"require('./database/postgreDB/pg').initializeHotelDB()\"",
    "export-structure": "node scripts/exportStructure.js",
    "export-all": "node scripts/exportAll.js"
  }
}
```

### æ•°æ®åº“ç®¡ç†
- æä¾›æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
- æ”¯æŒæ•°æ®åº“ç»“æ„å¯¼å‡º
- æ•°æ®è¿ç§»ç®¡ç†æœºåˆ¶

## å®‰å…¨æ€§æªæ–½

### èº«ä»½è®¤è¯ä¸æˆæƒ
- åŸºäºExpress Sessionçš„ä¼šè¯ç®¡ç†
- bcryptå¯†ç åŠ å¯†
- é‚®ç®±éªŒè¯æœºåˆ¶

### æ•°æ®å®‰å…¨
- SQLæ³¨å…¥é˜²æŠ¤ï¼ˆå‚æ•°åŒ–æŸ¥è¯¢ï¼‰
- XSSé˜²æŠ¤
- CORSè·¨åŸŸé…ç½®
- è®¿é—®é¢‘ç‡é™åˆ¶

### æ•°æ®å®Œæ•´æ€§
- æ•°æ®åº“çº¦æŸå’Œå¤–é”®å…³ç³»
- äº‹åŠ¡å¤„ç†ä¿è¯ä¸€è‡´æ€§
- è¾“å…¥æ•°æ®éªŒè¯

## æµ‹è¯•ç­–ç•¥
- Jestå•å…ƒæµ‹è¯•æ¡†æ¶
- Supertest APIé›†æˆæµ‹è¯•
- æ ¸å¿ƒä¸šåŠ¡é€»è¾‘æµ‹è¯•è¦†ç›–
- æ•°æ®åº“æ“ä½œæµ‹è¯•

## æ‰©å±•æ€§è®¾è®¡

### æ¨¡å—åŒ–æ¶æ„
- å‰åç«¯åˆ†ç¦»è®¾è®¡
- ä¸šåŠ¡æ¨¡å—æ¾è€¦åˆ
- å¯æ’æ‹”çš„ç»„ä»¶è®¾è®¡

### æ•°æ®åº“è®¾è®¡
- æ ‡å‡†åŒ–çš„è¡¨ç»“æ„è®¾è®¡
- é¢„ç•™æ‰©å±•å­—æ®µ
- ç´¢å¼•ä¼˜åŒ–æ”¯æŒé«˜å¹¶å‘

### APIè®¾è®¡
- RESTful APIè§„èŒƒ
- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
- ç‰ˆæœ¬æ§åˆ¶æ”¯æŒ

## éƒ¨ç½²å»ºè®®

### å®¹å™¨åŒ–éƒ¨ç½²
- å¼€å‘ç¤ºä¾‹ï¼ˆcompose.yaml å¯åŠ¨ postgres/backend/frontendï¼‰ï¼š
```
docker compose up -d --build
docker compose logs -f backend
```

### æ€§èƒ½ä¼˜åŒ–
- Redisç¼“å­˜å±‚
- æ•°æ®åº“è¿æ¥æ± 
- é™æ€èµ„æºCDN

è¿™ä¸ªé…’åº—ç®¡ç†ç³»ç»Ÿé¡¹ç›®ç»“æ„æ¸…æ™°ï¼ŒæŠ€æœ¯æ ˆç°ä»£åŒ–ï¼Œå…·å¤‡äº†å®Œæ•´çš„é…’åº—ä¸šåŠ¡ç®¡ç†åŠŸèƒ½ï¼Œåœ¨å®‰å…¨æ€§ã€æ‰©å±•æ€§å’Œç»´æŠ¤æ€§æ–¹é¢éƒ½æœ‰è‰¯å¥½çš„è®¾è®¡ã€‚
